{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4f455327\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"height\": \"20vh\"\n  }\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = {\n  src: \"\",\n  ref: \"video\",\n  id: \"video\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", {\n  id: \"camera\"\n}, null, -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"video\", _hoisted_3, null, 512 /* NEED_PATCH */), _hoisted_4]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","src","ref","id","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4"],"sources":["C:\\Users\\31136\\Desktop\\face_anti_front\\src\\components\\onlineAlaysis.vue"],"sourcesContent":["<template>\r\n <div class=\"container\">\r\n    <div style=\"height: 20vh;\"></div>\r\n    <video src=\"\" ref=\"video\" id=\"video\"></video>\r\n    <canvas id=\"camera\"></canvas>\r\n </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref,onMounted,onUnmounted} from 'vue';\r\nconst video = ref()\r\nconst mediaStreamTrack = ref({})\r\nconst videoStream = ref('')\r\nconst canvas = ref()\r\nconst ctx = ref()\r\nonMounted(()=>{\r\n    console.log('正在打开摄像头。。。')\r\n    getCamera();\r\n    console.log('摄像头已关闭。。。')\r\n})\r\nfunction getCamera(){\r\n    canvas.value = document.getElementById('camera');\r\n    ctx.value = canvas.value.getContext('2d');\r\n    if(navigator.mediaDevices){\r\n        navigator.mediaDevices.getUserMedia({video:true,audio:false}).then((stream)=>{\r\n            video.value.srcObject = stream;\r\n            video.value.play();\r\n            console.log('摄像头已打开。。。')\r\n            mediaStreamTrack.value = stream.getTracks()[0];\r\n            console.log('摄像头已打开。。。')\r\n        }).catch((err)=>{\r\n            console.log(err)\r\n        })\r\n    }else{\r\n        //防止浏览器版本旧不支持mediaDevices\r\n        navigator.mediaDevices={}\r\n    }\r\n}\r\nonUnmounted(()=>{\r\n    setTimeout(() => {\r\n        if (video.value && video.value.srcObject) {\r\n            video.value.srcObject.getTracks().forEach(track => track.stop());\r\n            console.log('摄像头已关闭。。。');\r\n        }\r\n    }, 1000); // 延迟 1 秒后执行销毁操作\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container{\r\n    display: flex;\r\n    width: 84vw;\r\n    max-height: 90vh;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    background-color: #f0f0f0;\r\n}\r\n#camera{\r\n    width:0;\r\n    height:0;\r\n    display: none;\r\n}\r\n#video{\r\n    width:60vw;\r\n}\r\n</style>"],"mappings":";;;EACMA,KAAK,EAAC;AAAW;gEACnBC,mBAAA,CAAiC;EAA5BC,KAAqB,EAArB;IAAA;EAAA;AAAqB;;EACnBC,GAAG,EAAC,EAAE;EAACC,GAAG,EAAC,OAAO;EAACC,EAAE,EAAC;;gEAC7BJ,mBAAA,CAA6B;EAArBI,EAAE,EAAC;AAAQ;;uBAHtBC,mBAAA,CAIM,OAJNC,UAIM,GAHHC,UAAiC,EACjCP,mBAAA,CAA6C,SAA7CQ,UAA6C,+BAC7CC,UAA6B,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}