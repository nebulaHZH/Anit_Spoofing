{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4f455327\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  src: \"\",\n  ref: \"video\",\n  id: \"video\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"canvas\", {\n  id: \"camera\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"botton_box\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"video\", _hoisted_2, null, 512 /* NEED_PATCH */), _hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _cache[0] || (_cache[0] = function () {})\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"开始检测\")]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    type: \"danger\",\n    onClick: _cache[1] || (_cache[1] = function () {})\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"关闭检测\")]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _cache[2] || (_cache[2] = function () {})\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"保存截图\")]),\n    _: 1 /* STABLE */\n  })])]);\n}","map":{"version":3,"names":["class","src","ref","id","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_el_button","type","onClick","_cache","default","_withCtx","_createTextVNode","_"],"sources":["C:\\Users\\31136\\Desktop\\face_anti_front\\src\\components\\onlineAlaysis.vue"],"sourcesContent":["<template>\r\n <div class=\"container\">\r\n    <video src=\"\" ref=\"video\" id=\"video\"></video>\r\n    <canvas id=\"camera\"></canvas>\r\n    <div class=\"botton_box\">\r\n        <el-button type=\"primary\" @click=\"function(){}\">开始检测</el-button>\r\n        <el-button type=\"danger\" @click=\"function(){}\">关闭检测</el-button>\r\n        <el-button type=\"primary\" @click=\"function(){}\">保存截图</el-button>\r\n    </div>\r\n    \r\n </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref,onMounted,onUnmounted} from 'vue';\r\nconst video = ref()\r\nconst mediaStreamTrack = ref({})\r\nconst videoStream = ref('')\r\nconst canvas = ref()\r\nconst ctx = ref()\r\nonMounted(()=>{\r\n    console.log('正在打开摄像头。。。')\r\n    getCamera();\r\n    console.log('摄像头已关闭。。。')\r\n})\r\nfunction getCamera(){\r\n    canvas.value = document.getElementById('camera');\r\n    ctx.value = canvas.value.getContext('2d');\r\n    if(navigator.mediaDevices){\r\n        navigator.mediaDevices.getUserMedia({video:true,audio:false}).then((stream)=>{\r\n            video.value.srcObject = stream;\r\n            video.value.play();\r\n            console.log('摄像头已打开。。。')\r\n            mediaStreamTrack.value = stream.getTracks()[0];\r\n            console.log('摄像头已打开。。。')\r\n        }).catch((err)=>{\r\n            console.log(err)\r\n        })\r\n    }else{\r\n        //防止浏览器版本旧不支持mediaDevices\r\n        navigator.mediaDevices={}\r\n    }\r\n}\r\nonUnmounted(()=>{\r\n    setTimeout(() => {\r\n        if (video.value && video.value.srcObject) {\r\n            video.value.srcObject.getTracks().forEach(track => track.stop());\r\n            console.log('摄像头已关闭。。。');\r\n        }\r\n    }, 1000); // 延迟 1 秒后执行销毁操作\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container{\r\n    display: flex;\r\n    width: 84vw;\r\n    max-height: 90vh;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    background-color: #f0f0f0;\r\n    padding-top: 3%;\r\n    padding-bottom: 3%;\r\n}\r\n#camera{\r\n    width:0;\r\n    height:0;\r\n    display: none;\r\n}\r\n#video{\r\n    width:60vw;\r\n}\r\n.botton_box{\r\n    margin-top: 10px;\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n</style>"],"mappings":";;;EACMA,KAAK,EAAC;AAAW;;EACZC,GAAG,EAAC,EAAE;EAACC,GAAG,EAAC,OAAO;EAACC,EAAE,EAAC;;gEAC7BC,mBAAA,CAA6B;EAArBD,EAAE,EAAC;AAAQ;;EACdH,KAAK,EAAC;AAAY;;;uBAH1BK,mBAAA,CASM,OATNC,UASM,GARHF,mBAAA,CAA6C,SAA7CG,UAA6C,+BAC7CC,UAA6B,EAC7BJ,mBAAA,CAIM,OAJNK,UAIM,GAHFC,YAAA,CAAgEC,oBAAA;IAArDC,IAAI,EAAC,SAAS;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAE,cAAY;;IALtDC,OAAA,EAAAC,QAAA,CAKwD,MAAI,CAL5DC,gBAAA,CAKwD,MAAI,E;IAL5DC,CAAA;MAMQR,YAAA,CAA+DC,oBAAA;IAApDC,IAAI,EAAC,QAAQ;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAE,cAAY;;IANrDC,OAAA,EAAAC,QAAA,CAMuD,MAAI,CAN3DC,gBAAA,CAMuD,MAAI,E;IAN3DC,CAAA;MAOQR,YAAA,CAAgEC,oBAAA;IAArDC,IAAI,EAAC,SAAS;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAE,cAAY;;IAPtDC,OAAA,EAAAC,QAAA,CAOwD,MAAI,CAP5DC,gBAAA,CAOwD,MAAI,E;IAP5DC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}