"use strict";(self["webpackChunkface_anti_front"]=self["webpackChunkface_anti_front"]||[]).push([[56],{4056:function(e,l,a){a.r(l),a.d(l,{default:function(){return v}});a(4114);var o=a(6768),t=a(144),d=a(7796),u=a(1387);const n=e=>((0,o.Qi)("data-v-825c589e"),e=e(),(0,o.jt)(),e),r={class:"verify_code"},s=n((()=>(0,o.Lk)("br",null,null,-1))),i={class:"dialog-footer"};var p=(0,o.pM)({__name:"userLogin",setup(e){const l=(0,t.KR)(!0),a=(0,t.KR)(!1),n=(0,t.KR)("140px"),p=(0,u.rd)(),c=(0,t.Kh)({email:"",verify:"",password1:"",password2:"",delivery:!1,type:[],resource:"",desc:""});function m(){console.log(c);const e=new FormData;e.append("email",c.email),e.append("password",c.password1),d.A.post("/login",e).then((e=>{e?(l.value=!1,localStorage.setItem("email",c.email),p.push("./load"),console.log("登录成功")):console.log("登录失败,账号或者密码错误")}))}function v(){if(console.log(c),c.password1!=c.password2)return void alert("两次密码不一致");if(""==c.verify)return void alert("验证码不能为空");if(""==c.email)return void alert("邮箱不能为空");if(""==c.password1)return void alert("密码不能为空");if(""==c.password2)return void alert("确认密码不能为空");const e=new FormData;e.append("email",c.email),e.append("password",c.password1),e.append("verify",c.verify),d.A.post("/register",e).then((e=>{"ok"==String(e)?(console.log("注册成功"),l.value=!1,localStorage.setItem("email",c.email),p.push("./load")):(alert("注册失败,邮箱重复或其他问题"),console.log("邮箱重复或其他问题"))}))}function f(){const e=new FormData;e.append("email",c.email),d.A.post("/send_verify_code",e).then((e=>{e?console.log("验证码发送成功"):console.log("验证码发送失败")}))}return(e,t)=>{const d=(0,o.g2)("el-input"),u=(0,o.g2)("el-form-item"),p=(0,o.g2)("el-button"),k=(0,o.g2)("el-form"),w=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(w,{closeOnClickModal:!1,closeOnPressEscape:!1,showClose:!1,modelValue:l.value,"onUpdate:modelValue":t[6]||(t[6]=e=>l.value=e),title:"用户登录",width:"500"},{footer:(0,o.k6)((()=>[(0,o.Lk)("div",i,[a.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(p,{key:0,onClick:t[4]||(t[4]=e=>a.value=!0)},{default:(0,o.k6)((()=>[(0,o.eW)("注册")])),_:1})),a.value?((0,o.uX)(),(0,o.Wv)(p,{key:1,onClick:v},{default:(0,o.k6)((()=>[(0,o.eW)("注册")])),_:1})):(0,o.Q3)("",!0),a.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(p,{key:2,type:"primary",onClick:m},{default:(0,o.k6)((()=>[(0,o.eW)(" 登录 ")])),_:1})),a.value?((0,o.uX)(),(0,o.Wv)(p,{key:3,type:"primary",onClick:t[5]||(t[5]=e=>a.value=!1)},{default:(0,o.k6)((()=>[(0,o.eW)(" 取消 ")])),_:1})):(0,o.Q3)("",!0)])])),default:(0,o.k6)((()=>[(0,o.bF)(k,{model:c,class:"form"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{label:"用户邮箱","label-width":n.value},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:c.email,"onUpdate:modelValue":t[0]||(t[0]=e=>c.email=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,o.bF)(u,{label:"密码","label-width":n.value},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:c.password1,"onUpdate:modelValue":t[1]||(t[1]=e=>c.password1=e)},null,8,["modelValue"])])),_:1},8,["label-width"]),a.value?((0,o.uX)(),(0,o.Wv)(u,{key:0,label:"确认密码","label-width":n.value},{default:(0,o.k6)((()=>[(0,o.bF)(d,{modelValue:c.password2,"onUpdate:modelValue":t[2]||(t[2]=e=>c.password2=e)},null,8,["modelValue"])])),_:1},8,["label-width"])):(0,o.Q3)("",!0),a.value?((0,o.uX)(),(0,o.Wv)(u,{key:1,label:"验证码","label-width":n.value},{default:(0,o.k6)((()=>[(0,o.Lk)("div",r,[(0,o.bF)(d,{modelValue:c.verify,"onUpdate:modelValue":t[3]||(t[3]=e=>c.verify=e)},null,8,["modelValue"]),(0,o.bF)(p,{type:"primary",onClick:f},{default:(0,o.k6)((()=>[(0,o.eW)("获取验证码")])),_:1})])])),_:1},8,["label-width"])):(0,o.Q3)("",!0)])),_:1},8,["model"]),s])),_:1},8,["modelValue"])])}}}),c=a(1241);const m=(0,c.A)(p,[["__scopeId","data-v-825c589e"]]);var v=m}}]);
//# sourceMappingURL=56.e3b7fd07.js.map